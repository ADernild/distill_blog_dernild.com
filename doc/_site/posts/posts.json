[
  {
    "path": "posts/2020-11-19-presdebate-data-collection-and-cleaning/",
    "title": "Data Collection and Cleaning",
    "description": "In this post I intend to describe and showcase the more technical aspects, of the data collection and cleaning process of Twitter data for a Natural Language Processing project focused on the Presidential debates 2020. For this project I collected, a total amount of 325.314 unique tweets, during and immediately after the first and second presidential debate 2020. To do this I used R software, R Studio, Twitter Rest API, and R markdown and Distill for this site.",
    "author": [
      {
        "name": "Alexander Dernild",
        "url": "https://dernild.com"
      }
    ],
    "date": "2020-11-19",
    "categories": [],
    "contents": "\nConnecting to the Twitter API\n\nTwitter is built on the robust conversations happening around the world via Tweets. With Twitter’s API platform, you’ll find endpoints to capitalize on the functionality and data contained within Tweets, and to build great experiences and solutions for your customers. These endpoints enable you to manage your Tweets, publish and curate Tweets, filter and search for Tweet topics or trends, and much more (Twitter, 2020).\n\nTwitter Developer Portal - Setting up an application\nIn order to collect tweets I had to apply for an API key from Twitter1. Luckily I was fast enough granted access to the Twitter Developers Portal, enabling me to set up an application which can be connected to R.\nFigure 1.1 Configuring application on Twitter Developer Portal\nCreating an Access Token in R\nConnecting the newly created application to R, an access token has to be created using the application’s API key and secret. I used the create_token() function from rtweet package (Kearney, 2019) to do this, configuring it as follows.\nlibrary(rtweet)\n\nkey <- 'XXXXXXXXXXXXXXXXX'\nsecret <- 'XXXXXXXXXXXXXXXXXX'\n     \n# Connecting to Twitter API\ntwitter_token <- create_token(\n app = \"presidentialdebate\",\n consumer_key = key,\n consumer_secret = secret\n)\nSearching tweets\nHaving set up a token, tweets can now be searched using the search_tweets() function with the main parameters being q (Query to be searched) and n (total number of desired tweets). As I wanted to perform multiple queries with different keywords, number of tweets and time frames, around both the first and second presidential debate, I decided to create a .csv file with the specifications of each query.\n# Grabbing tweets programmatically using a .csv file\nref <- read.csv('twitter_data.csv', stringsAsFactors = FALSE) # .csv file containing paths and search specs\n\n\n\n{\"columns\":[{\"label\":[\"name\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"path\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"altpath\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"since\"],\"name\":[4],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"until\"],\"name\":[5],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"n\"],\"name\":[6],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"type\"],\"name\":[7],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"term\"],\"name\":[8],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"presdebate_first_r\",\"2\":\"data_backup/tweets/first/24_hour/recent/pres_debate.rds\",\"3\":\"data_backup/tweets/first/24_hour/recent/pres_debate_clean.rds\",\"4\":\"2020-09-30\",\"5\":\"2020-10-01\",\"6\":\"36000\",\"7\":\"recent\",\"8\":\"presidentialdebate\"},{\"1\":\"trump_first_r\",\"2\":\"data_backup/tweets/first/24_hour/recent/trump.rds\",\"3\":\"data_backup/tweets/first/24_hour/recent/trump_clean.rds\",\"4\":\"2020-09-30\",\"5\":\"2020-10-01\",\"6\":\"18000\",\"7\":\"recent\",\"8\":\"trump\"},{\"1\":\"biden_first_r\",\"2\":\"data_backup/tweets/first/24_hour/recent/biden.rds\",\"3\":\"data_backup/tweets/first/24_hour/recent/biden_clean.rds\",\"4\":\"2020-09-30\",\"5\":\"2020-10-01\",\"6\":\"18000\",\"7\":\"recent\",\"8\":\"biden\"},{\"1\":\"presdebate_first_m\",\"2\":\"data_backup/tweets/first/24_hour/mixed/pres_debate.rds\",\"3\":\"data_backup/tweets/first/24_hour/mixed/pres_debate_clean.rds\",\"4\":\"2020-09-30\",\"5\":\"2020-10-01\",\"6\":\"36000\",\"7\":\"mixed\",\"8\":\"presidentialdebate\"},{\"1\":\"trump_first_m\",\"2\":\"data_backup/tweets/first/24_hour/mixed/trump.rds\",\"3\":\"data_backup/tweets/first/24_hour/mixed/trump_clean.rds\",\"4\":\"2020-09-30\",\"5\":\"2020-10-01\",\"6\":\"18000\",\"7\":\"mixed\",\"8\":\"trump\"},{\"1\":\"biden_first_m\",\"2\":\"data_backup/tweets/first/24_hour/mixed/biden.rds\",\"3\":\"data_backup/tweets/first/24_hour/mixed/biden_clean.rds\",\"4\":\"2020-09-30\",\"5\":\"2020-10-01\",\"6\":\"18000\",\"7\":\"mixed\",\"8\":\"biden\"},{\"1\":\"presdebate_first_p\",\"2\":\"data_backup/tweets/first/24_hour/popular/pres_debate.rds\",\"3\":\"data_backup/tweets/first/24_hour/popular/pres_debate_clean.rds\",\"4\":\"2020-09-30\",\"5\":\"2020-10-01\",\"6\":\"36000\",\"7\":\"popular\",\"8\":\"presidentialdebate\"},{\"1\":\"trump_first_p\",\"2\":\"data_backup/tweets/first/24_hour/popular/trump.rds\",\"3\":\"data_backup/tweets/first/24_hour/popular/trump_clean.rds\",\"4\":\"2020-09-30\",\"5\":\"2020-10-01\",\"6\":\"18000\",\"7\":\"popular\",\"8\":\"trump\"},{\"1\":\"biden_first_p\",\"2\":\"data_backup/tweets/first/24_hour/popular/biden.rds\",\"3\":\"data_backup/tweets/first/24_hour/popular/biden_clean.rds\",\"4\":\"2020-09-30\",\"5\":\"2020-10-01\",\"6\":\"18000\",\"7\":\"popular\",\"8\":\"biden\"},{\"1\":\"presdebate_first_rw\",\"2\":\"data_backup/tweets/first/7_day/recent/pres_debate.rds\",\"3\":\"data_backup/tweets/first/7_day/recent/pres_debate_clean.rds\",\"4\":\"2020-09-27\",\"5\":\"2020-10-04\",\"6\":\"36000\",\"7\":\"recent\",\"8\":\"presidentialdebate\"},{\"1\":\"trump_first_rw\",\"2\":\"data_backup/tweets/first/7_day/recent/trump.rds\",\"3\":\"data_backup/tweets/first/7_day/recent/trump_clean.rds\",\"4\":\"2020-09-27\",\"5\":\"2020-10-04\",\"6\":\"18000\",\"7\":\"recent\",\"8\":\"trump\"},{\"1\":\"biden_first_rw\",\"2\":\"data_backup/tweets/first/7_day/recent/biden.rds\",\"3\":\"data_backup/tweets/first/7_day/recent/biden_clean.rds\",\"4\":\"2020-09-27\",\"5\":\"2020-10-04\",\"6\":\"18000\",\"7\":\"recent\",\"8\":\"biden\"},{\"1\":\"presdebate_first_mw\",\"2\":\"data_backup/tweets/first/7_day/mixed/pres_debate.rds\",\"3\":\"data_backup/tweets/first/7_day/mixed/pres_debate_clean.rds\",\"4\":\"2020-09-27\",\"5\":\"2020-10-04\",\"6\":\"36000\",\"7\":\"mixed\",\"8\":\"presidentialdebate\"},{\"1\":\"trump_first_mw\",\"2\":\"data_backup/tweets/first/7_day/mixed/trump.rds\",\"3\":\"data_backup/tweets/first/7_day/mixed/trump_clean.rds\",\"4\":\"2020-09-27\",\"5\":\"2020-10-04\",\"6\":\"18000\",\"7\":\"mixed\",\"8\":\"trump\"},{\"1\":\"biden_first_mw\",\"2\":\"data_backup/tweets/first/7_day/mixed/biden.rds\",\"3\":\"data_backup/tweets/first/7_day/mixed/biden_clean.rds\",\"4\":\"2020-09-27\",\"5\":\"2020-10-04\",\"6\":\"18000\",\"7\":\"mixed\",\"8\":\"biden\"},{\"1\":\"presdebate_first_pw\",\"2\":\"data_backup/tweets/first/7_day/popular/pres_debate.rds\",\"3\":\"data_backup/tweets/first/7_day/popular/pres_debate_clean.rds\",\"4\":\"2020-09-27\",\"5\":\"2020-10-04\",\"6\":\"36000\",\"7\":\"popular\",\"8\":\"presidentialdebate\"},{\"1\":\"trump_first_pw\",\"2\":\"data_backup/tweets/first/7_day/popular/trump.rds\",\"3\":\"data_backup/tweets/first/7_day/popular/trump_clean.rds\",\"4\":\"2020-09-27\",\"5\":\"2020-10-04\",\"6\":\"18000\",\"7\":\"popular\",\"8\":\"trump\"},{\"1\":\"biden_first_pw\",\"2\":\"data_backup/tweets/first/7_day/popular/biden.rds\",\"3\":\"data_backup/tweets/first/7_day/popular/biden_clean.rds\",\"4\":\"2020-09-27\",\"5\":\"2020-10-04\",\"6\":\"18000\",\"7\":\"popular\",\"8\":\"biden\"},{\"1\":\"presdebate_final_r\",\"2\":\"data_backup/tweets/final/24_hour/recent/pres_debate.rds\",\"3\":\"data_backup/tweets/final/24_hour/recent/pres_debate_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-24\",\"6\":\"36000\",\"7\":\"recent\",\"8\":\"presidentialdebate\"},{\"1\":\"trump_final_r\",\"2\":\"data_backup/tweets/final/24_hour/recent/trump.rds\",\"3\":\"data_backup/tweets/final/24_hour/recent/trump_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-24\",\"6\":\"18000\",\"7\":\"recent\",\"8\":\"trump\"},{\"1\":\"biden_final_r\",\"2\":\"data_backup/tweets/final/24_hour/recent/biden.rds\",\"3\":\"data_backup/tweets/final/24_hour/recent/biden_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-24\",\"6\":\"18000\",\"7\":\"recent\",\"8\":\"biden\"},{\"1\":\"presdebate_final_m\",\"2\":\"data_backup/tweets/final/24_hour/mixed/pres_debate.rds\",\"3\":\"data_backup/tweets/final/24_hour/mixed/pres_debate_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-24\",\"6\":\"36000\",\"7\":\"mixed\",\"8\":\"presidentialdebate\"},{\"1\":\"trump_final_m\",\"2\":\"data_backup/tweets/final/24_hour/mixed/trump.rds\",\"3\":\"data_backup/tweets/final/24_hour/mixed/trump_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-24\",\"6\":\"18000\",\"7\":\"mixed\",\"8\":\"trump\"},{\"1\":\"biden_final_m\",\"2\":\"data_backup/tweets/final/24_hour/mixed/biden.rds\",\"3\":\"data_backup/tweets/final/24_hour/mixed/biden_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-24\",\"6\":\"18000\",\"7\":\"mixed\",\"8\":\"biden\"},{\"1\":\"presdebate_final_p\",\"2\":\"data_backup/tweets/final/24_hour/popular/pres_debate.rds\",\"3\":\"data_backup/tweets/final/24_hour/popular/pres_debate_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-24\",\"6\":\"36000\",\"7\":\"popular\",\"8\":\"presidentialdebate\"},{\"1\":\"trump_final_p\",\"2\":\"data_backup/tweets/final/24_hour/popular/trump.rds\",\"3\":\"data_backup/tweets/final/24_hour/popular/trump_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-24\",\"6\":\"18000\",\"7\":\"popular\",\"8\":\"trump\"},{\"1\":\"biden_final_p\",\"2\":\"data_backup/tweets/final/24_hour/popular/biden.rds\",\"3\":\"data_backup/tweets/final/24_hour/popular/biden_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-24\",\"6\":\"18000\",\"7\":\"popular\",\"8\":\"biden\"},{\"1\":\"debate_r\",\"2\":\"data_backup/tweets/final/24_hour/recent/debate.rds\",\"3\":\"data_backup/tweets/final/24_hour/recent/debate_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-24\",\"6\":\"36000\",\"7\":\"recent\",\"8\":\"debate2020\"},{\"1\":\"debate_m\",\"2\":\"data_backup/tweets/final/24_hour/mixed/debate.rds\",\"3\":\"data_backup/tweets/final/24_hour/mixed/debate_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-24\",\"6\":\"36000\",\"7\":\"mixed\",\"8\":\"debate2020\"},{\"1\":\"debate_p\",\"2\":\"data_backup/tweets/final/24_hour/popular/debate.rds\",\"3\":\"data_backup/tweets/final/24_hour/popular/debate_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-24\",\"6\":\"36000\",\"7\":\"popular\",\"8\":\"debate2020\"},{\"1\":\"presdebate_final_rw\",\"2\":\"data_backup/tweets/final/7_day/recent/pres_debate.rds\",\"3\":\"data_backup/tweets/final/7_day/recent/pres_debate_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-30\",\"6\":\"36000\",\"7\":\"recent\",\"8\":\"presidentialdebate\"},{\"1\":\"trump_final_rw\",\"2\":\"data_backup/tweets/final/7_day/recent/trump.rds\",\"3\":\"data_backup/tweets/final/7_day/recent/trump_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-30\",\"6\":\"18000\",\"7\":\"recent\",\"8\":\"trump\"},{\"1\":\"biden_final_rw\",\"2\":\"data_backup/tweets/final/7_day/recent/biden.rds\",\"3\":\"data_backup/tweets/final/7_day/recent/biden_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-30\",\"6\":\"18000\",\"7\":\"recent\",\"8\":\"biden\"},{\"1\":\"presdebate_final_mw\",\"2\":\"data_backup/tweets/final/7_day/mixed/pres_debate.rds\",\"3\":\"data_backup/tweets/final/7_day/mixed/pres_debate_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-30\",\"6\":\"36000\",\"7\":\"mixed\",\"8\":\"presidentialdebate\"},{\"1\":\"trump_final_mw\",\"2\":\"data_backup/tweets/final/7_day/mixed/trump.rds\",\"3\":\"data_backup/tweets/final/7_day/mixed/trump_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-30\",\"6\":\"18000\",\"7\":\"mixed\",\"8\":\"trump\"},{\"1\":\"biden_final_mw\",\"2\":\"data_backup/tweets/final/7_day/mixed/biden.rds\",\"3\":\"data_backup/tweets/final/7_day/mixed/biden_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-30\",\"6\":\"18000\",\"7\":\"mixed\",\"8\":\"biden\"},{\"1\":\"presdebate_final_pw\",\"2\":\"data_backup/tweets/final/7_day/popular/pres_debate.rds\",\"3\":\"data_backup/tweets/final/7_day/popular/pres_debate_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-30\",\"6\":\"36000\",\"7\":\"popular\",\"8\":\"presidentialdebate\"},{\"1\":\"trump_final_pw\",\"2\":\"data_backup/tweets/final/7_day/popular/trump.rds\",\"3\":\"data_backup/tweets/final/7_day/popular/trump_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-30\",\"6\":\"18000\",\"7\":\"popular\",\"8\":\"trump\"},{\"1\":\"biden_final_pw\",\"2\":\"data_backup/tweets/final/7_day/popular/biden.rds\",\"3\":\"data_backup/tweets/final/7_day/popular/biden_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-30\",\"6\":\"18000\",\"7\":\"popular\",\"8\":\"biden\"},{\"1\":\"debate_rw\",\"2\":\"data_backup/tweets/final/7_day/recent/debate.rds\",\"3\":\"data_backup/tweets/final/7_day/recent/debate_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-30\",\"6\":\"36000\",\"7\":\"recent\",\"8\":\"debate2020\"},{\"1\":\"debate_mw\",\"2\":\"data_backup/tweets/final/7_day/mixed/debate.rds\",\"3\":\"data_backup/tweets/final/7_day/mixed/debate_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-30\",\"6\":\"36000\",\"7\":\"mixed\",\"8\":\"debate2020\"},{\"1\":\"debate_pw\",\"2\":\"data_backup/tweets/final/7_day/popular/debate.rds\",\"3\":\"data_backup/tweets/final/7_day/popular/debate_clean.rds\",\"4\":\"2020-10-23\",\"5\":\"2020-10-30\",\"6\":\"36000\",\"7\":\"popular\",\"8\":\"debate2020\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\n  \n\nThe .csv file could then be looped through, passing the specified parameters to search_tweets() at each iteration. For this purpose I wrapped search_tweets() along with saveRDS() to save the queries as .rds files, in a new function I named twitter_grab().\ntwitter_grab <- function(term, n, since, until, type, file) {\n  tweets <- search_tweets(q = term,\n                          n = n,\n                          include_rts = FALSE,\n                          lang = \"en\",\n                          since = since,\n                          until = until,\n                          type = type,\n                          retryonratelimit = TRUE\n  )\n  \n  saveRDS(tweets, file = file)\n  cat(file, \"saved\")\n}\n# Looping throug data.frame ref calling twitter_grab() function\nfor (row in 32:nrow(ref)) {\n  twitter_grab(\n    ref$term[row],\n    ref$n[row],\n    ref$since[row],\n    ref$until[row],\n    ref$type[row],\n    ref$path[row]\n  )\n}\n\n\n\nKearney, M. W. (2019). Rtweet: Collecting and analyzing twitter data. Journal of Open Source Software, 4(42), 1829. https://doi.org/10.21105/joss.01829\n\n\nTwitter. (2020). Publish and manage Tweets, and analyze Tweet data. https://developer.twitter.com/en/use-cases\n\n\nTwitter grants API keys based on use case and application, documentation, terms and application form can be found here↩︎\n",
    "preview": {},
    "last_modified": "2020-11-24T01:46:43+01:00",
    "input_file": {}
  }
]
